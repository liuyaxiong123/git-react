<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        *{margin:0;padding:0;}
        #wrap{
            width: 500px;height: 400px;
            border:1px solid red;
            position:relative;
            margin:50px auto;
        }
        #bg{
            width: 30px;height: 400px;
            background:blue;
            position:absolute;
            right:0;
            top:0;
        }
        #bg img{
            width: 30px;height: 50px;
            position:absolute;
            top:0;
            left:0;
            cursor:pointer;
        }
        #outer{
            width: 470px;height: 400px;
            overflow: hidden;
        }
        #inner{
            font-size:30px;
            width: 470px;
        }
    </style>
</head>
<body style="height:2000px;">
    <div id="wrap">
        <div id="bg">
            <img src="img/0.jpg" alt="">
        </div>
        <div id="outer">
            <div id="inner">
                的说法计算机的反馈电视剧快疯了倒计时了开发就打算考几分圣诞节肯定是放假卡的设计费了的加速卡减肥垃圾啊
                的说法计算机的反馈电视剧快疯了倒计时了开发就打算考几分圣诞节肯定是放假卡的设计费了的加速卡减肥垃圾啊
                的说法计算机的反馈电视剧快疯了倒计时了开发就打算考几分圣诞节肯定是放假卡的设计费了的加速卡减肥垃圾啊
                的说法计算机的反馈电视剧快疯了倒计时了开发就打算考几分圣诞节肯定是放假卡的设计费了的加速卡减肥垃圾啊
                的说法计算机的反馈电视剧快疯了倒计时了开发就打算考几分圣诞节肯定是放假卡的设计费了的加速卡减肥垃圾啊
                的说法计算机的反馈电视剧快疯了倒计时了开发就打算考几分圣诞节肯定是放假卡的设计费了的加速卡减肥垃圾啊
                的说法计算机的反馈电视剧快疯了倒计时了开发就打算考几分圣诞节肯定是放假卡的设计费了的加速卡减肥垃圾啊
                的说法计算机的反馈电视剧快疯了倒计时了开发就打算考几分圣诞节肯定是放假卡的设计费了的加速卡减肥垃圾啊
                的说法计算机的反馈电视剧快疯了倒计时了开发就打算考几分圣诞节肯定是放假卡的设计费了的加速卡减肥垃圾啊
                的说法计算机的反馈电视剧快疯了倒计时了开发就打算考几分圣诞节肯定是放假卡的设计费了的加速卡减肥垃圾啊
                的说法计算机的反馈电视剧快疯了倒计时了开发就打算考几分圣诞节肯定是放假卡的设计费了的加速卡减肥垃圾啊
                的说法计算机的反馈电视剧快疯了倒计时了开发就打算考几分圣诞节肯定是放假卡的设计费了的加速卡减肥垃圾啊
                的说法计算机的反馈电视剧快疯了倒计时了开发就打算考几分圣诞节肯定是放假卡的设计费了的加速卡减肥垃圾啊
            </div>
        </div>
    </div>
</body>
<script>
    var bg=document.querySelector('#bg');
    var icon=document.querySelectorAll('img')[0];
    var outer=document.querySelector('#outer');
    var maxY=bg.clientHeight-icon.offsetHeight;//icon运动的最大top值
    var scale=Math.abs((inner.offsetHeight-outer.offsetHeight)/(bg.offsetHeight-icon.offsetHeight));
    icon.onmousedown=function(ev){
        var ev=ev||window.event;
        if(ev.preventDefault){
            ev.preventDefault();
        }else{
            ev.returnValue=false;
        }
        document.onmousemove=function(ev){
            var ev=ev||window.event;
            if(ev.preventDefault){
                ev.preventDefault();
            }else{
                ev.returnValue=false;
            }
            var t=ev.pageY-wrap.offsetTop-icon.offsetHeight/2;
            if(t<0){
                t=0;
            }
            if(t>=maxY){
                t=maxY;
            }
            icon.style.top=t+'px';
            outer.scrollTop=t*scale;
        }
    }
    document.onmouseup=function(){
        document.onmousemove=null;
    }
    var str=window.navigator.userAgent.toLowerCase();
    if(str.indexOf('firefox')!=-1){
        wrap.addEventListener('DOMMouseScroll',function(ev){
            var ev=ev||window.event;
            if(ev.preventDefault){
            ev.preventDefault();
            }else{
                ev.returnValue=false;
            }
            if(ev.detail<0){
                var t=icon.offsetTop-5;
                if(t<0){
                    t=0;
                }
            }else{
                var t=icon.offsetTop+5;
                if(t>=maxY){
                    t=maxY;
                }
            }
        },false);
    }else{
        wrap.onmousewheel=function(ev){
            var ev=ev||window.event;
            if(ev.preventDefault){
            ev.preventDefault();
            }else{
                ev.returnValue=false;
            }
            if(ev.wheelDelta>0){
                var t=icon.offsetTop-5;
                if(t<0){
                    t=0;
                }
            }else{
                var t=icon.offsetTop+5;
                if(t>=maxY){
                    t=maxY;
                }
            }
            icon.style.top=t+'px';
            outer.scrollTop=t*scale;
        }
    }
</script>
</html>